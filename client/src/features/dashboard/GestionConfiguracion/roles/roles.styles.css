/* ----------------------------------------------------
   Base / Tokens
---------------------------------------------------- */
@import url("https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:wght@400;600;700&display=swap");

:root{
  --primary:#6b7280;
  --primary-2:#4b5563;
  --primary-light:rgba(107,114,128,.06);
  --muted:#6b7280;
  --success:#0f766e;
  --danger:#be1e2d;
  --card-shadow:0 6px 20px rgba(2,6,23,.06);
  --modal-shadow:0 18px 40px rgba(2,6,23,.12);
  --glass-shadow:0 6px 20px rgba(2,6,23,.06);
  --radius:12px;
  --radius-sm:8px;
  --transition:all .22s cubic-bezier(.4,0,.2,1);
}

.material-symbols-rounded{
  font-family:"Material Symbols Rounded";
  font-weight:400; font-style:normal; font-size:18px; line-height:1;
  display:inline-block; white-space:nowrap; direction:ltr;
  -webkit-font-smoothing:antialiased;
}

/* ----------------------------------------------------
   Página
---------------------------------------------------- */
.roles-page{display:flex; flex-direction:column; min-height:100%;}

/* ----------------------------------------------------
   Header
---------------------------------------------------- */
.header{
  background:rgba(255,255,255,.98);
  padding:28px 34px;
  border-bottom:1px solid rgba(31,41,55,.04);
  display:flex; justify-content:space-between; align-items:center; gap:16px;
  box-shadow:var(--card-shadow);
  /* Fix: permitir wrap si no cabe */
  flex-wrap:wrap;
}
.header h1{
  font-size:28px; font-weight:800;
  background:linear-gradient(135deg,#1f2937 0%,#4b5563 100%);
  -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
}
.header-actions{display:flex; align-items:center; gap:14px; flex-wrap:wrap; row-gap:10px;}

/* ----------------------------------------------------
   Buscador
---------------------------------------------------- */
.search-wrapper{position:relative; display:flex; align-items:center;}
.search-input{
  padding:12px 18px 12px 44px; border-radius:10px; border:1px solid rgba(31,41,55,.06);
  min-width:280px; font-size:14px; background:#fff; color:#1f2937;
  transition:var(--transition); box-shadow:0 4px 12px rgba(2,6,23,.04);
}
.search-input:focus{outline:none; border-color:var(--primary); box-shadow:0 0 0 4px rgba(75,85,99,.06); transform:translateY(-1px);}
.search-input::placeholder{color:#9aa6b2;}
.search-icon{position:absolute; left:14px; top:50%; transform:translateY(-50%); width:18px; height:18px; color:#9aa6b2; pointer-events:none;}

/* ----------------------------------------------------
   Botones
---------------------------------------------------- */
.btn{
  padding:12px 18px; border-radius:10px; border:none; cursor:pointer;
  font-size:14px; font-weight:700; transition:var(--transition);
  display:inline-flex; align-items:center; gap:10px; text-decoration:none;
}
.btn.primary{
  background:linear-gradient(135deg,#f0f2f4 0%,#e7ecf0 100%);
  color:#1f2937; box-shadow:0 6px 18px rgba(2,6,23,.04);
  border:1px solid rgba(31,41,55,.04);
}
.btn.primary:hover{transform:translateY(-2px); box-shadow:0 10px 26px rgba(2,6,23,.06);}
.btn.btn-cancel{background:rgba(31,41,55,.03); color:#6b7280; border:1px solid rgba(31,41,55,.04);}
.btn.btn-cancel:hover{background:rgba(31,41,55,.06); color:#374151; transform:translateY(-1px);}
.btn.btn-danger{background:linear-gradient(135deg,var(--danger) 0%,#b6232b 100%); color:#fff;}

/* Botón único para ACL (evita duplicados) */
.btn-acl{
  background:transparent; color:#111827;
  border:1px solid rgba(31,41,55,.1); border-radius:8px;
  padding:10px 12px; cursor:pointer; font-size:13px; font-weight:700;
  display:inline-flex; align-items:center; gap:8px;
}
.btn-acl:hover{background:rgba(31,41,55,.03); transform:translateY(-2px);}

/* ----------------------------------------------------
   Contenedor/Tabla
---------------------------------------------------- */
.tables-container{
  padding:32px; padding-left:32px; padding-right:32px; /* fix respiración lateral */
  flex:1 1 auto; display:flex; flex-direction:column;
  max-height:calc(100vh - 200px); position:relative; padding-bottom:140px; overflow:visible;
}
table{
  width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed;
  background:#fff; border-radius:12px; overflow:hidden; box-shadow:var(--glass-shadow);
  border:1px solid rgba(31,41,55,.04);
}
thead th{
  background:linear-gradient(135deg,#f7fafc 0%,#f1f5f9 100%);
  color:#475569; padding:18px 20px; text-align:left; font-weight:700; font-size:13px;
  text-transform:uppercase; letter-spacing:.6px;
}
tbody td{
  padding:16px 20px; border-bottom:1px solid rgba(31,41,55,.03);
  font-size:14px; color:#374151; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
tbody tr:last-child td{border-bottom:none;}
tbody tr{transition:var(--transition);}
tbody tr:hover{background:rgba(31,41,55,.02); transform:translateY(-1px);}

/* Acciones fila */
.btn-group{display:flex; gap:8px;}
.btn-edit{
  background:transparent; color:#1f2937; border:1px solid rgba(31,41,55,.06);
  border-radius:8px; padding:10px 12px; cursor:pointer; font-size:13px; font-weight:700;
}
.btn-delete{
  background:transparent; color:var(--danger); border:1px solid rgba(190,30,45,.12);
  border-radius:8px; padding:10px 12px; cursor:pointer; font-size:13px; font-weight:700;
}
.btn-edit:hover{background:rgba(31,41,55,.03); transform:translateY(-2px);}
.btn-delete:hover{background:rgba(190,30,45,.04); transform:translateY(-2px);}

/* Chip “Resultados” (fix corte) */
.note{
  display:inline-flex; align-items:center; max-width:100%; width:auto;
  margin:16px 0 12px 32px; padding:8px 12px; border-radius:999px;
  background:#f8fafc; border:1px solid rgba(31,41,55,.06);
}

/* ----------------------------------------------------
   Paginación
---------------------------------------------------- */
.pagination-container{
  display:flex; justify-content:center; align-items:center;
  padding:20px 0; position:absolute; bottom:-90px; left:50%;
  transform:translateX(-50%); z-index:1200;
}
.pagination-bar{
  display:flex; align-items:center; gap:8px; background:#fff;
  padding:10px 12px; border-radius:999px; box-shadow:var(--glass-shadow);
  border:1px solid rgba(31,41,55,.04);
}
.page-btn{
  padding:8px 12px; border-radius:999px; border:none; background:transparent;
  cursor:pointer; min-width:36px; font-size:14px; color:#6b7280; font-weight:700;
}
.page-btn:hover:not(:disabled){background:rgba(31,41,55,.03); color:var(--primary); transform:translateY(-1px);}
.page-btn.active{background:var(--primary); color:#fff;}
.page-btn:disabled{opacity:.5; cursor:not-allowed;}

/* ----------------------------------------------------
   Modal base
---------------------------------------------------- */
.modal{
  display:none; position:fixed; inset:0; background:rgba(12,15,20,.6);
  backdrop-filter:blur(6px); z-index:3000; align-items:center; justify-content:center;
}
.modal.show{display:flex;}
.modal-dialog{
  width:100%; max-width:560px; background:#fff; border-radius:16px; box-shadow:var(--modal-shadow);
  overflow:hidden; transform:scale(.96) translateY(18px); opacity:0;
  transition:all .32s cubic-bezier(.34,1.56,.64,1);
  border:1px solid rgba(31,41,55,.04); position:relative;
}
.modal.show .modal-dialog{transform:scale(1) translateY(0); opacity:1;}
.modal-header{
  display:flex; align-items:center; justify-content:space-between;
  padding:20px 22px; border-bottom:1px solid rgba(31,41,55,.04); background:rgba(255,255,255,.98);
}
.modal-title{font-size:20px; color:#111827; font-weight:800;}
.modal-sub{font-size:14px; color:#6b7280; font-weight:600;}
.close-btn{
  background:rgba(31,41,55,.03); border:none; font-size:20px; color:#9aa6b2; cursor:pointer;
  padding:10px; border-radius:8px; width:40px; height:40px; display:flex; align-items:center; justify-content:center;
}
.close-btn:hover{background:rgba(31,41,55,.06); color:#111827; transform:rotate(.001deg) scale(1.03);}
.modal-body{padding:20px; display:flex; flex-direction:column; gap:18px;}
.modal-footer{
  display:flex; justify-content:flex-end; gap:12px; padding:16px 20px;
  border-top:1px solid rgba(31,41,55,.04); background:rgba(255,255,255,.98);
  position:relative; z-index:1;
}
/* Asegura clics dentro del modal */
.modal .modal-dialog *{pointer-events:auto;}

.modal-user{
  display:flex; align-items:center; gap:12px; padding:12px;
  border-radius:12px; background:rgba(31,41,55,.02); border:1px solid rgba(31,41,55,.03);
  font-size:14px; color:#475569;
}
.avatar-small{
  width:40px; height:40px; border-radius:50%;
  display:flex; align-items:center; justify-content:center; color:#fff;
  background:linear-gradient(135deg,#59626a 0%,#3b4450 100%); font-weight:700; font-size:14px; flex:0 0 40px;
}

/* ----------------------------------------------------
   Form
---------------------------------------------------- */
.form-row{display:flex; flex-direction:column; gap:8px;}
.form-row label{font-size:14px; color:#111827; font-weight:700;}
.form-row input, .form-row textarea, .form-row select{
  padding:12px 14px; border-radius:10px; border:1px solid rgba(31,41,55,.06);
  font-size:14px; transition:var(--transition); background:#fff;
}
.form-row input:focus, .form-row textarea:focus, .form-row select:focus{
  outline:none; border-color:var(--primary); box-shadow:0 0 0 4px rgba(75,85,99,.06); transform:translateY(-1px);
}
.form-row textarea{min-height:100px; resize:vertical; font-family:inherit;}

/* ----------------------------------------------------
   ACL – Tabla y Controles
---------------------------------------------------- */
.acl-grid-wrap{width:100%; overflow:auto; border:1px solid rgba(31,41,55,.06); border-radius:12px;}
.acl-table{width:100%; border-collapse:separate; border-spacing:0;}
.acl-table thead th{
  position:sticky; top:0; z-index:2;
  background:linear-gradient(135deg,#f7fafc 0%,#f1f5f9 100%);
  color:#475569; padding:14px 12px; text-align:left; font-weight:800; font-size:12px;
  text-transform:uppercase; letter-spacing:.4px; border-bottom:1px solid rgba(31,41,55,.06);
}
.acl-table tbody td{padding:12px; border-bottom:1px solid rgba(31,41,55,.04);}
.acl-perm{font-weight:700; color:#111827; white-space:nowrap;}
.acl-cell{text-align:center;}

/* checkbox bonito */
.chk{display:inline-flex; align-items:center; justify-content:center; position:relative;}
.chk input{position:absolute; opacity:0; pointer-events:none;}
.chk span{
  width:20px; height:20px; border-radius:6px; display:inline-block;
  border:2px solid rgba(31,41,55,.26); background:#fff; transition:all .18s ease; box-shadow:inset 0 0 0 3px transparent;
}
.chk input:checked + span{border-color:#1f2937; background:#1f2937; box-shadow:inset 0 0 0 3px #fff;}

/* Tabs & Chips */
.acl-tabs{
  display:flex; gap:8px; padding:12px 16px; border-bottom:1px solid rgba(31,41,55,.06);
  background:rgba(250,250,250,.9);
}
.acl-tab{
  display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px;
  border:1px solid rgba(31,41,55,.06); background:#fff; cursor:pointer; font-weight:700; color:#374151;
  transition:var(--transition); box-shadow:0 4px 10px rgba(2,6,23,.04);
}
.acl-tab:hover{transform:translateY(-1px);}
.acl-tab.active{background:linear-gradient(135deg,#f0f2f4 0%,#e7ecf0 100%); border-color:rgba(31,41,55,.04);}

.acl-grid{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
@media (max-width:720px){.acl-grid{grid-template-columns:1fr;}}

.acl-chip{
  display:flex; align-items:center; gap:10px; padding:12px 14px;
  border-radius:12px; border:1px solid rgba(31,41,55,.08); background:#fff; cursor:pointer; user-select:none;
  transition:var(--transition); box-shadow:var(--card-shadow);
}
.acl-chip input{display:none;}
.acl-chip .material-symbols-rounded{color:#6b7280;}
.acl-chip.on{border-color:rgba(31,41,55,.14); background:linear-gradient(135deg,#f9fafb 0%,#f3f4f6 100%);}
.acl-chip:hover{transform:translateY(-2px);}

/* ----------------------------------------------------
   Responsivo extra
---------------------------------------------------- */
@media (max-width:1200px){
  .search-input{min-width:220px;}
  .tables-container{padding-left:20px; padding-right:20px;}
  .note{margin-left:20px;}
}


/* --- FIX corte/overflow en columna ACCIONES --- */
.tables-container{
  overflow-x: auto;              /* si no cabe, scroll horizontal, no se corta */
}

table{
  table-layout: auto !important; /* permite que las columnas se ajusten al contenido */
}

thead th, tbody td{
  vertical-align: middle;        /* centra contenido en filas altas */
}

/* Deja que la última columna (Acciones) mida lo que necesite y pueda saltar de línea */
tbody td:last-child{
  width: 1%;
  white-space: normal !important;
}

/* Los botones pueden envolver y no empujan la fila */
.btn-group{
  flex-wrap: wrap;
  gap: 10px;
  justify-content: flex-start;
}

/* Un pelín menos de padding para que no crezca tanto la fila */
tbody td{ padding: 14px 18px; }

/* Evita que el alto crezca por línea de texto en botones */
.btn{ line-height: 1; }

/* Opcional: en pantallas medianas/pequeñas estrecha un poco el buscador */
@media (max-width: 1280px){
  .search-input{ min-width: 220px; }
}
/* ====== Fix: acciones compactas y sin cortes ====== */

/* La tabla puede scrollear horizontal si no alcanza el ancho */
.tables-container{
  overflow-x: auto;
}

/* Deja que las columnas se ajusten a su contenido */
table{
  table-layout: auto !important;
}

/* Filas más compactas */
tbody td{
  padding: 12px 16px !important;
  vertical-align: middle;
}

/* Columna de Acciones: contenido en una sola línea */
tbody td:last-child{
  white-space: nowrap !important;   /* no partir los botones */
  width: 1%;                        /* shrink-to-fit: ocupa lo necesario */
}

/* Grupo de botones en línea (sin wrap) y con gap corto */
.btn-group{
  display: inline-flex !important;
  flex-wrap: nowrap !important;
  gap: 8px !important;
  align-items: center;
  justify-content: flex-start;
}

/* Botones más compactos para que quepan sin hacer la fila alta */
.btn{
  padding: 8px 10px !important;
  font-size: 13px !important;
  line-height: 1 !important;
}

/* Mantén celdas de texto con elípsis, pero sin afectar Acciones */
tbody td:not(:last-child){
  white-space: normal;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Opcional: en pantallas medianas, busca aún más compacidad */
@media (max-width: 1280px){
  .search-input{ min-width: 220px; }
  .btn{ padding: 7px 9px !important; font-size: 12.5px !important; }
  .btn-group{ gap: 6px !important; }
}
